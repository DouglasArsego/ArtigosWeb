{% extends "base.html" %}

{% block title %}Perfil{% endblock %}

{% block content %}
<h2>Perfil de {{ user.username }}</h2>
<p><strong>Nome completo:</strong> {{ user.nome_completo }}</p>
<p><strong>Email:</strong> {{ user.email }}</p>
<p><strong>Formação acadêmica:</strong> {{ user.formacao_academica }}</p>
<p><strong>Biografia:</strong> {{ user.biografia }}</p>

<h3>Meus Artigos</h3>
<ul>
    {% for artigo in meus_artigos %}
        <li>
            <a href="{% url 'detalhe_artigo' artigo.id %}">{{ artigo.titulo }}</a>
        </li>
    {% empty %}
        <li>Você ainda não criou nenhum artigo.</li>
    {% endfor %}
</ul>

<h3>Artigos em que sou colaborador</h3>
<ul>
    {% for artigo in colaboracoes %}
        <li>
            <a href="{% url 'detalhe_artigo' artigo.id %}">{{ artigo.titulo }}</a>
            — Autor: {{ artigo.autor.username }}
        </li>
    {% empty %}
        <li>Você ainda não está colaborando em nenhum artigo.</li>
    {% endfor %}
</ul>

<h3>Pedidos de Colaboração Recebidos</h3>
<ul>
    {% for pedido in pedidos_recebidos %}
        <li>
            <strong><a href="{% url 'perfil_publico' pedido.solicitante.username %}">{{ pedido.solicitante.username }}</a></strong> pediu para colaborar no artigo
            <a href="{% url 'detalhe_artigo' pedido.artigo.id %}">{{ pedido.artigo.titulo }}</a>.
            <form method="post" action="{% url 'pedido_colaboracao_decidir' pedido.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" name="decisao" value="aceitar">Aceitar</button>
                <button type="submit" name="decisao" value="recusar">Recusar</button>
            </form>
        </li>
    {% empty %}
        <li>Você não possui pedidos pendentes de colaboração.</li>
    {% endfor %}
</ul>
{% endblock %}
